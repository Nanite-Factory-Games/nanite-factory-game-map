<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello wasm-pack!</title>
  </head>
  <body>
    <script type="module">
        import init_script, { init } from "./out/mygame.js";
        // read all files in assets folder recursively and map file path to bytes
        function readAllAssets(path) {
            const assets = {};
            const files = fs.readdirSync(path);
            for (const file of files) {
                const filePath = path + "/" + file;
                if (fs.statSync(filePath).isDirectory()) {
                    assets[file] = readAllAssets(filePath);
                } else {
                    assets[file] = fs.readFileSync(filePath);
                }
            }
            return assets;
        }
        
        
        (async () => {
            // get every asset from the assets folder and map its path to the bytes for the file
            const assets = {};

            

            init_script().then(()=>{
                init({
                    tickrate: 10,
                    controls_enabled: true,
                    
                    assets,
                    camera_position: [0, 0],
                    follow_id: null,
                    canvas_id: "#canvas",
                });
            })
        })();
        
        

    </script>

    <canvas id="canvas" width="800" height="600"></canvas>
  </body>